{"pageTitle":"SpringBoot3 整合 Logback 日志框架2","title":"SpringBoot3 整合 Logback 日志框架2","keyword":"logback2","content":"<p><br></p><pre class=\"language-html\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\r\n \r\n&lt;configuration scan=\"true\" scanPeriod=\"60 seconds\" debug=\"false\"&gt;\r\n \r\n    &lt;!-- 定义日志输出到控制台的格式 --&gt;\r\n    &lt;property name=\"log.console.pattern\" value=\"%magenta(%d{yyyy-MM-dd HH:mm:ss:SSS}) [%thread] %highlight([%-5level]) %cyan(%logger{90}) - %msg%n\" /&gt;\r\n    &lt;!-- 定义日志输出到文件中的格式 --&gt;\r\n    &lt;property name=\"log.file.pattern\" value=\"%d{yyyy-MM-dd HH:mm:ss:SSS} [%thread] [%-5level] %logger{90} - %msg%n\" /&gt;\r\n    &lt;!-- 日志文件存储目录（从 application 配置文件取得） --&gt;\r\n    &lt;springProperty scope=\"context\" name=\"file.path\" source=\"logback.path\" defaultValue=\"${user.home}/ShopSystem/log\" /&gt;\r\n    &lt;!-- 输出 info 级别及以上的日志文件名-前缀（从 application 配置文件取得） --&gt;\r\n    &lt;springProperty scope=\"context\" name=\"file.name.info.prefix\" source=\"logback.file-name.info.prefix\" defaultValue=\"system\" /&gt;\r\n    &lt;!-- 输出 info 级别及以上的日志文件名-后缀（从 application 配置文件取得） --&gt;\r\n    &lt;springProperty scope=\"context\" name=\"file.name.info.suffix\" source=\"logback.file-name.info.suffix\" defaultValue=\"log\" /&gt;\r\n    &lt;!-- 输出 error 级别的日志文件名-前缀（从 application 配置文件取得） --&gt;\r\n    &lt;springProperty scope=\"context\" name=\"file.name.error.prefix\" source=\"logback.file-name.error.prefix\" defaultValue=\"system.error\" /&gt;\r\n    &lt;!-- 输出 error 级别的日志文件名-后缀（从 application 配置文件取得） --&gt;\r\n    &lt;springProperty scope=\"context\" name=\"file.name.error.suffix\" source=\"logback.file-name.error.suffix\" defaultValue=\"log\" /&gt;\r\n \r\n    &lt;!-- 输出日志到控制台 --&gt;\r\n    &lt;appender name=\"CONSOLE_APPENDER\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;${log.console.pattern}&lt;/pattern&gt;\r\n            &lt;charset&gt;UTF-8&lt;/charset&gt;\r\n        &lt;/encoder&gt;\r\n        &lt;!-- 输出 DEBUG 级别及以上的日志 --&gt;\r\n        &lt;filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\"&gt;\r\n            &lt;level&gt;DEBUG&lt;/level&gt;\r\n        &lt;/filter&gt;\r\n    &lt;/appender&gt;\r\n \r\n    &lt;!-- 滚动输出 INFO 级别及以上的日志到文件 --&gt;\r\n    &lt;appender name=\"ROLLING_FILE_APPENDER\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt;\r\n        &lt;file&gt;${file.path}/${file.name.info.prefix}.${file.name.info.suffix}&lt;/file&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;${log.file.pattern}&lt;/pattern&gt;\r\n            &lt;charset&gt;UTF-8&lt;/charset&gt;\r\n        &lt;/encoder&gt;\r\n        &lt;!-- 设置滚动策略，基于大小和时间的滚动策略 --&gt;\r\n        &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\"&gt;\r\n            &lt;fileNamePattern&gt;${file.path}/${file.name.info.prefix}.%d{yyyy-MM-dd}.%i.${file.name.info.suffix}&lt;/fileNamePattern&gt;\r\n            &lt;maxFileSize&gt;2MB&lt;/maxFileSize&gt;\r\n            &lt;maxHistory&gt;3&lt;/maxHistory&gt;\r\n            &lt;totalSizeCap&gt;10MB&lt;/totalSizeCap&gt;\r\n        &lt;/rollingPolicy&gt;\r\n        &lt;!-- 输出 INFO 级别及以上的日志 --&gt;\r\n        &lt;filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\"&gt;\r\n            &lt;level&gt;INFO&lt;/level&gt;\r\n        &lt;/filter&gt;\r\n    &lt;/appender&gt;\r\n \r\n    &lt;!-- 滚动输出 ERROR 级别的日志到文件 --&gt;\r\n    &lt;appender name=\"ROLLING_FILE_ERROR_APPENDER\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt;\r\n        &lt;file&gt;${file.path}/${file.name.error.prefix}.${file.name.error.suffix}&lt;/file&gt;\r\n        &lt;encoder&gt;\r\n            &lt;pattern&gt;${log.file.pattern}&lt;/pattern&gt;\r\n            &lt;charset&gt;UTF-8&lt;/charset&gt;\r\n        &lt;/encoder&gt;\r\n        &lt;!-- 设置滚动策略，基于大小和时间的滚动策略 --&gt;\r\n        &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\"&gt;\r\n            &lt;fileNamePattern&gt;${file.path}/${file.name.error.prefix}.%d{yyyy-MM-dd}.%i.${file.name.error.suffix}&lt;/fileNamePattern&gt;\r\n            &lt;maxFileSize&gt;2MB&lt;/maxFileSize&gt;\r\n            &lt;maxHistory&gt;3&lt;/maxHistory&gt;\r\n            &lt;totalSizeCap&gt;10MB&lt;/totalSizeCap&gt;\r\n        &lt;/rollingPolicy&gt;\r\n        &lt;!-- 只保留 ERROR 级别的日志 --&gt;\r\n        &lt;filter class=\"ch.qos.logback.classic.filter.LevelFilter\"&gt;\r\n            &lt;level&gt;ERROR&lt;/level&gt;\r\n            &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;\r\n            &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;\r\n        &lt;/filter&gt;\r\n    &lt;/appender&gt;\r\n \r\n    &lt;!-- 控制 org.springframework 包下的所有类的 INFO 级别及以上的日志打印 --&gt;\r\n    &lt;logger name=\"org.springframework\" level=\"INFO\" /&gt;\r\n    &lt;!-- 控制 _org.springframework 包下的所有类的 INFO 级别及以上的日志打印 --&gt;\r\n    &lt;logger name=\"_org.springframework\" level=\"INFO\" /&gt;\r\n \r\n    &lt;!-- 将各 appender 挂载到 root 节点下  --&gt;\r\n    &lt;root level=\"DEBUG\"&gt;\r\n        &lt;appender-ref ref=\"CONSOLE_APPENDER\" /&gt;\r\n        &lt;appender-ref ref=\"ROLLING_FILE_APPENDER\" /&gt;\r\n        &lt;appender-ref ref=\"ROLLING_FILE_ERROR_APPENDER\" /&gt;\r\n    &lt;/root&gt;\r\n \r\n&lt;/configuration&gt;</pre>"}